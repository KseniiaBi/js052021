<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
	<!-- по принципу второго мета-тега пишутся все остальные мета-теги -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@1,800&family=Roboto:ital,wght@0,700;1,300;1,400&display=swap" rel="stylesheet">

</head>
<body>


<script>


//  функциональное ООП - только функция-конструктор

// базовый класс (родительский)

function Machine(name, power){
	this.enabled = false;
	this.name = name;
	this.power = power;


	this.enable = function(){
		this.enabled = true;
		console.log(`${name} with power ${power}W is turned on`);
	}
}


// дочерний класс
function CoffeeMaker(name, power){ // функция-конструктор
	Machine.call(this, name, power);


	//this.enabled = false; // через this пишем public переменные
	this._waterAmount = 0; // protected variable
	let waMAX = 1000; // private переменная, как и параметр, указанный при создании и не записанный в свойство с this

	let parentEnable = this.enable; // сохраняем метод this.enable, который доступен из Machine в переменную, чтобы его не потерять при переопределении
	// parentEnable - просто имя переменной, вы можете выбирать любое

	this.enable = function(){
		parentEnable(); // вызываем сначала родительский метод, а потом дописываем чем мы его хотим улучшить (можно в другом порядке)
		this.heat();
	}

	this.heat = function(){
		setTimeout(function(){
			console.log('Кофеварка нагрелась');
		},100);
	}


	this.getPower = function(){
		console.log(power);
	}

	this.run = function(){
		if(this.enabled){
			if(this._waterAmount >= 30){
				setTimeout(function(){
					console.log('Coffee is ready!');
				},1000);
			}
			else{
				console.warn('Не достаточно воды');
			}
		}  
	}

	// this.getWaterAmount = function(){
	// 	return this._waterAmount;
	// }

	// this.setWaterAmount = function(amount){
	// 	if(typeof(amount) !== 'number'){
	// 		// throw new Error('Сыпем гвозди...');
	// 		console.error('Сыпем гвозди...');
	// 		return false;
	// 	}
	// 	if(amount + this._waterAmount > waMAX){
	// 		console.error('Облились!');
	// 	}
	// 	else if(amount < 0){
	// 		console.error('Эта вода непригодна для полива цветов!');
	// 	}
	// 	else{
	// 		this._waterAmount += amount;
	// 		console.log(`Текущее количество воды - ${this._waterAmount}мл.`);
	// 	}
	// }

	this.waterAmount = function(amount){ // замена для get + sets
		if(amount === undefined){
			console.log(this._waterAmount);
		}
		else{
			if(typeof(amount) !== 'number'){
				// throw new Error('Сыпем гвозди...');
				console.error('Сыпем гвозди...');
				return false;
			}
			if(amount + this._waterAmount > waMAX){
				console.error('Облились!');
			}
			else if(amount < 0){
				console.error('Эта вода непригодна для полива цветов!');
			}
			else{
				this._waterAmount += amount;
				console.log(`Текущее количество воды - ${this._waterAmount}мл.`);
			}
		}
	}
}

class Gadget {
	constructor(name, power){
		this.enabled = false;
		this.name = name;
		this.power = power;
	}

	enable(){
		this.enabled = true;
		console.log(`${this.name} with power ${this.power}W is turned on`);
	}
}

class CoffeeMachine extends Gadget {
	constructor(name, power) {
	 	super(name, power);
	 	this._waMAX = 1000;
	 	this._waterAmount = 0; 
	 	
	 } // мы можем опустить вызов конструктора, если все параметры наследуются 

	 #waterlimit = 1000;

	waterAmount(amount){
		if(amount === undefined){
			console.log(this._waterAmount);
		}
		else{
			if(typeof(amount) !== 'number'){
				// throw new Error('Сыпем гвозди...');
				console.error('Сыпем гвозди...');
				return false;
			}
			if(amount + this._waterAmount > this.#waterlimit){
				console.error('Облились!');
			}
			else if(amount < 0){
				console.error('Эта вода непригодна для полива цветов!');
			}
			else{
				this._waterAmount += amount;
				console.log(`Текущее количество воды - ${this._waterAmount}мл.`);
			}
		}
	}
}


let saeco = new CoffeeMachine('Saeco', 10);

saeco.enable();




//  static props and methods


class User  {

	static usersNum = 0;
	static countUsers(){
  		console.log(User.usersNum);
	}


	constructor(name, age) {
		this.name = name;
		this.age = age;
		User.usersNum++;
	}


	sayHi(){
		console.log(`Hi! My name is ${this.name}, I am ${this.age} y.o`);
	}
}

let pete = new User('Peter', 43);
pete.sayHi();

let mary = new User('Mary', 22);
let mary2 = new User('Mary', 22);

User.countUsers();

// pete.#dbdg;
// User.usersNum
// User.countUsers()


mary instanceof CoffeeMachine; // false
mary instanceof User; // true



</script>

</body>
</html>
