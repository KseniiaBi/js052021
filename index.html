<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 

	<style>
	*{
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	.content{
		display: flex;
		flex-flow: row wrap;
		justify-content: space-evenly;
	}

	.coffee{
		width: 300px;
		text-align: center;
		border: 1px solid #e2e2e2;
		box-shadow: 2px 2px 0 #e2e2e2;
		margin: 20px;
	}

	h3{
		margin: 30px;
		font-size: 24px;
		color: #C3B091; 
	}

	h2{
		font-size: 44px;
		color: tomato; 
		text-align: right;
	}

	img{
		max-width: 90%;
	}

	</style>
</head>
<body>

	<div class="content">
		
	</div>


<script>

	const container = document.querySelector('.content');
	const url = 'data.json';

// XMLHttpRequest
	let xhr = new XMLHttpRequest();
	xhr.open('GET', url); // конфигурируем запрос - open(method, url, async, user, pass)
	xhr.send(); // отправляем запрос
	// xhr.abort() - если вы передумали

// events - onreadystatechange, onload, onabort, onprogress

	xhr.onprogress = function(event) { // запускается периодически
	  // event.loaded - количество загруженных байт
	  // event.lengthComputable = равно true, если сервер присылает заголовок Content-Length
	  // event.total - количество байт всего (только если lengthComputable равно true)
	  console.log(`Загружено ${event.loaded} из ${event.total}`);
	};
	xhr.onerror = function(e){
		console.error('Failed' + e);
	}

	xhr.onreadystatechange = function(){
		console.log(xhr.readyState);
		if(xhr.readyState == 4){
			buildLayout(JSON.parse(xhr.response));
			console.log(xhr.response);
		}
	}

	// status - statusText [200 - success, 404 - not found, 403 - forbidden, 501 - internal server error] statusText


	function buildLayout(d){
		d.forEach(item => {
			let div = document.createElement('div');
			div.classList.add('coffee');

			div.innerHTML = `<img src=${item.img} alt="coffee">
							<h3>${item.name}</h3>
							<h2>${item.price}</h2>`;

			container.append(div);
		});
	}

</script>

</body>
</html>
